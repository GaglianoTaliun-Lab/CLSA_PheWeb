{% extends "layout.html" %}


{% block in_head %}
<script src="{{ url_for('.static', filename='vendor/stream_table-1.1.1.min.js') }}" type="text/javascript"></script>
<script src="{{ url_for('.static', filename='phenotypes.js') }}" type="text/javascript"></script>
<script type="text/javascript">
  $.getJSON(window.model.urlprefix + "/api/phenotypes.json").done(function(data) {
      window.debug = window.debug || {};
      window.debug.phenotypes = data;
      window.data = data;
      //TODO: can just put url_for() here instead of passing values
      window.pheno_url = {{ pheno_url | tojson }};
      window.region_url = {{ region_url | tojson }};
      window.variant_url = {{ variant_url | tojson }};
      populate_streamtable(data);
  });
</script>
<style type="text/css">
#stream_table td {
  padding: 4px;
  padding-left: 6px;
  padding-bottom: 3px;
  font-size: 90%;
}
.nearest_genes_col {
  max-width: 15em;
}

label {
  margin: 0;
  padding-right: 15px;
}

.arrow-container {
  float: left;
  margin-right: 10px; /* Adjust spacing as needed */
  margin-bottom: 0px;
}

.arrow-up, .arrow-down {
  display: block;
  padding: 3px;
  margin-left: 0px;
  margin-right: 0px;
}

.arrow-up {
  border: solid grey;
  border-width: 0px 2px 2px 0px;
  transform: rotate(-135deg);
  -webkit-transform: rotate(-135deg);
}

.arrow-down {
  border: solid grey;
  border-width: 0px 2px 2px 0px;
  transform: rotate(45deg);
  -webkit-transform: rotate(45deg);
}

.arrow-container:hover {
  cursor: pointer;
  background-color: lightgrey;
}

</style>
{% endblock %}


{% block contained %}
<div class="row">
    <div class="col-xs-12 col-sm-8">
        <h1 style="margin-top:0">All Phenotypes</h1>
    </div>
    <div class="col-xs-12 col-sm-4">
      {% if config.DOWNLOAD_PHENOTYPES_BUTTON %}
        <span class="pull-right"><a class="btn btn-default" href="{{ url_for('.download_phenotypes') }}">Download</a></span>
      {% endif %}
  </div>
</div>
<br>

<div class="row" style="margin-bottom: 0.5em">
  <div class="col-xs-12 col-sm-8 col-md-6">
        <input type="text" class="form-control" id="search" placeholder="Search... &quot;TCF7L2&quot;, &quot;rs1861867&quot;, etc.">
      </div>
  <!--
  <div class="checkbox-container">
      <input type="checkbox" id="check_combined" checked>
      <label for="check_combined"> Show combined </label>
      {% if stratified %}
      <input type="checkbox" id="check_male" checked>
      <label for="check_male"> Show male </label>

      <input type="checkbox" id="check_female" checked>
      <label for="check_female"> Show female </label>
      {% endif %}
  </div>
  -->
  <div class="col-xs-12 col-sm-4 col-md-6">
    <h5 class="pull-right"><div id="streamtable-found" class="label label-primary"></div></h5>
  </div>
</div>
<div class="row stream_table_row">
  <div class="col-xs-12">
    <table id="stream_table" class="table table-striped table-bordered">
      <thead>
        <tr>
          <th> <span class="arrow-container" data-sort="category:asc" onclick="sortTable(0)"><span class="arrow-up"></span><span class="arrow-down"></span></span> Category </th>
          <th> <span class="arrow-container" data-sort="phenocode:asc" onclick="sortTable(1)"><span class="arrow-up"></span><span class="arrow-down"></span></span> Phenotype </th>
          <th><span class="arrow-container" data-sort="num_samples:asc:number" onclick="sortTable(2)"><span class="arrow-up"></span><span class="arrow-down"></span></span> # Samples</th>
          <th><span class="arrow-container" data-sort="num_peaks:asc:number" onclick="sortTable(3)"><span class="arrow-up"></span><span class="arrow-down"></span></span> # Loci&lt;5e-8</th>
          <th>Top Variant</th>
          <th><span class="arrow-container" data-sort="pval:desc:number" onclick="sortTable(5)"><span class="arrow-up" ></span><span class="arrow-down" style="border-color:black"></span></span> P-value</th>
          <th class="nearest_genes_col">Nearest Gene(s)</th>
        </tr>
      </thead>
      <tbody>
      </tbody>
    </table>
  </div>
</div>

{% endblock %}
